\usepackage{listings}

\lstdefinestyle{tamerstyle}{
    % backgroundcolor=\color{PaleBlue}, % useless because of gaps between lines
    commentstyle=\color{CommentColor},
    keywordstyle=\color{IdentifierColor},
    numberstyle=\tiny\color{ValueColor},
    stringstyle=\color{OutputColor},
    basicstyle=\ttfamily\footnotesize,
    includerangemarker=true,
    breakatwhitespace=false,         
    breaklines=false,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=8pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=4
}

\lstset{style=tamerstyle}

\newcommand{\lstCodeBox}[1]{\colorbox{AliceBlue}{\begin{minipage}[c][][c]{0.985\linewidth}#1\end{minipage}}}
\newcommand{\lstCodeTitle}[2]{\hfill \fbox{\scriptsize{#1}:#2}}

\newcommand{\lstFile}[2]{\lstCodeBox{\lstinputlisting[language=#1,mathescape]{#2}}}
\newcommand{\lstTail}[3]{\lstCodeBox{\lstinputlisting[language=#1,firstline=#2,mathescape]{#3}}}
\newcommand{\lstChunk}[4]{\lstCodeBox{\lstinputlisting[language=#1,firstline=#2,lastline=#3,mathescape]{#4}}}
